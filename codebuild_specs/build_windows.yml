version: 0.2
env:
  shell: powershell.exe
  variables:
    NODE_OPTIONS: --max-old-space-size=8096
phases:
  pre_build:
    commands:
      - |
        # Skip Node.js installation and use ignore-engines to bypass version checks
        Write-Host "Current Node version: $(node -v)"
        Write-Host "Setting yarn to ignore engines for eslint-plugin-jsdoc compatibility"
        yarn config set ignore-engines true
  build:
    commands:
      - yarn run production-build
      - yarn build-tests
artifacts:
  files:
    - 'shared-scripts.sh'
